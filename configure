#!/usr/bin/env bash

#check os type
platform='unknown'
unamestr=`uname`
if [[ "$unamestr" == 'Linux' ]]; then
  platform='linux'
elif [[ "$unamestr" == 'Darwin' ]]; then
  platform='osx'
fi

echo "Current os type is $platform"

if [[ $platform == 'osx' ]]; then
  # Some packages need following tap
  brew tap homebrew/dupes
  # --with-default-names will replace default osx's commands.
  # corutils packages need some environment variables that is 
  # set in 'fishshell/config.fish' file
  brew install coreutils
  brew install binutils
  brew install diffutils
  brew install ed --with-default-names
  brew install findutils --with-default-names
  brew install gawk
  brew install gnu-indent --with-default-names
  brew install gnu-sed --with-default-names
  brew install gnu-tar --with-default-names
  brew install gnu-which --with-default-names
  brew install gnutls
  brew install grep --with-default-names
  brew install gzip
  brew install screen
  brew install watch
  brew install wdiff --with-gettext
  brew install wget
elif [[ $platform == 'linux' ]]; then
fi

export ZSH=$HOME/.dotfiles/.oh-my-zsh

git clone git://github.com/robbyrussell/oh-my-zsh.git $HOME/.dotfiles/.oh-my-zsh
git clone https://github.com/VundleVim/Vundle.vim.git $HOME/.dotfiles/.vim/bundle/Vundle.vim
git clone https://github.com/tarruda/zsh-autosuggestions.git $HOME/.dotfiles/.oh-my-zsh/custom/plugins/zsh-autosuggestions
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $HOME/.dotfiles/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting

ln -nsf $HOME/.dotfiles/.vimrc $HOME/.vimrc
ln -nsf $HOME/.dotfiles/.xvimrc $HOME/.xvimrc
ln -nsf $HOME/.dotfiles/.zshrc $HOME/.zshrc
ln -nsf $HOME/.dotfiles/.ideavimrc $HOME/.ideavimrc
ln -nsf $HOME/.dotfiles/.tmux.conf $HOME/.tmux.conf
ln -nsf $HOME/.dotfiles/bb-colemak $HOME/.dotfiles/.oh-my-zsh/custom/plugins/bb-colemak

mkdir -p $HOME/.config $HOME/.config/fish 

ln -nsf $HOME/.dotfiles/fishshell/config.fish $HOME/.config/fish/config.fish
ln -nsf $HOME/.dotfiles/fishshell/functions $HOME/.config/fish/functions

vim +PluginInstall +qall

